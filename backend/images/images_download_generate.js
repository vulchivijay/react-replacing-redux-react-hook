
process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';

// const rq = require('requests')
const fs = require('fs');
const path = require('path');
const axios = require('axios');
// rq.get('https://cdn.dummyjson.com', verify='False')
// Define your array of image URLs
const thumbnail_images = [
    "essence-mascara-lash-princess.webp",
    "eyeshadow-palette-with-mirror.webp",
    "powder-canister.webp",
    "red-lipstick.webp",
    "red-nail-polish.webp",
    "calvin-klein-ck-one.webp",
    "chanel-coco-noir-eau-de.webp",
    "dior-j'adore.webp",
    "dolce-shine-eau-de.webp",
    "gucci-bloom-eau-de.webp",
    "annibale-colombo-bed.webp",
    "annibale-colombo-sofa.webp",
    "bedside-table-african-cherry.webp",
    "knoll-saarinen-executive-conference-chair.webp",
    "wooden-bathroom-sink-with-mirror.webp",
    "apple.webp",
    "beef-steak.webp",
    "cat-food.webp",
    "chicken-meat.webp",
    "cooking-oil.webp",
    "cucumber.webp",
    "dog-food.webp",
    "eggs.webp",
    "fish-steak.webp",
    "green-bell-pepper.webp",
    "green-chili-pepper.webp",
    "honey-jar.webp",
    "ice-cream.webp",
    "juice.webp",
    "kiwi.webp",
    "lemon.webp",
    "milk.webp",
    "mulberry.webp",
    "nescafe-coffee.webp",
    "potatoes.webp",
    "protein-powder.webp",
    "red-onions.webp",
    "rice.webp",
    "soft-drinks.webp",
    "strawberry.webp",
    "tissue-paper-box.webp",
    "water.webp",
    "decoration-swing.webp",
    "family-tree-photo-frame.webp",
    "house-showpiece-plant.webp",
    "plant-pot.webp",
    "table-lamp.webp",
    "bamboo-spatula.webp",
    "black-aluminium-cup.webp",
    "black-whisk.webp",
    "boxed-blender.webp",
    "carbon-steel-wok.webp",
    "chopping-board.webp",
    "citrus-squeezer-yellow.webp",
    "egg-slicer.webp",
    "electric-stove.webp",
    "fine-mesh-strainer.webp",
    "fork.webp",
    "glass.webp",
    "grater-black.webp",
    "hand-blender.webp",
    "ice-cube-tray.webp",
    "kitchen-sieve.webp",
    "knife.webp",
    "lunch-box.webp",
    "microwave-oven.webp",
    "mug-tree-stand.webp",
    "pan.webp",
    "plate.webp",
    "red-tongs.webp",
    "silver-pot-with-glass-cap.webp",
    "slotted-turner.webp",
    "spice-rack.webp",
    "spoon.webp",
    "tray.webp",
    "wooden-rolling-pin.webp",
    "yellow-peeler.webp",
    "apple-macbook-pro-14-inch-space-grey.webp",
    "asus-zenbook-pro-dual-screen-laptop.webp",
    "huawei-matebook-x-pro.webp",
    "lenovo-yoga-920.webp",
    "new-dell-xps-13-9300-laptop.webp",
    "blue-&-black-check-shirt.webp",
    "gigabyte-aorus-men-tshirt.webp",
    "man-plaid-shirt.webp",
    "man-short-sleeve-shirt.webp",
    "men-check-shirt.webp",
    "nike-air-jordan-1-red-and-black.webp",
    "nike-baseball-cleats.webp",
    "puma-future-rider-trainers.webp",
    "sports-sneakers-off-white-&-red.webp",
    "sports-sneakers-off-white-red.webp",
    "brown-leather-belt-watch.webp",
    "longines-master-collection.webp",
    "rolex-cellini-date-black-dial.webp",
    "rolex-cellini-moonphase.webp",
    "rolex-datejust.webp",
    "rolex-submariner-watch.webp",
    "amazon-echo-plus.webp",
    "apple-airpods.webp",
    "apple-airpods-max-silver.webp",
    "apple-airpower-wireless-charger.webp",
    "apple-homepod-mini-cosmic-grey.webp",
    "apple-iphone-charger.webp",
    "apple-magsafe-battery-pack.webp",
    "apple-watch-series-4-gold.webp",
    "beats-flex-wireless-earphones.webp",
    "iphone-12-silicone-case-with-magsafe-plum.webp",
    "monopod.webp",
    "selfie-lamp-with-iphone.webp",
    "selfie-stick-monopod.webp",
    "tv-studio-camera-pedestal.webp",
    "generic-motorcycle.webp",
    "kawasaki-z800.webp",
    "motogp-ci.h1.webp",
    "scooter-motorcycle.webp",
    "sportbike-motorcycle.webp",
    "attitude-super-leaves-hand-soap.webp",
    "olay-ultra-moisture-shea-butter-body-wash.webp",
    "vaseline-men-body-and-face-lotion.webp",
    "iphone-5s.webp",
    "iphone-6.webp",
    "iphone-13-pro.webp",
    "iphone-x.webp",
    "oppo-a57.webp",
    "oppo-f19-pro-plus.webp",
    "oppo-k1.webp",
    "realme-c35.webp",
    "realme-x.webp",
    "realme-xt.webp",
    "samsung-galaxy-s7.webp",
    "samsung-galaxy-s8.webp",
    "samsung-galaxy-s10.webp",
    "vivo-s1.webp",
    "vivo-v9.webp",
    "vivo-x21.webp",
    "american-football.webp",
    "baseball-ball.webp",
    "baseball-glove.webp",
    "basketball.webp",
    "basketball-rim.webp",
    "cricket-ball.webp",
    "cricket-bat.webp",
    "cricket-helmet.webp",
    "cricket-wicket.webp",
    "feather-shuttlecock.webp",
    "football.webp",
    "golf-ball.webp",
    "iron-golf.webp",
    "metal-baseball-bat.webp",
    "tennis-ball.webp",
    "tennis-racket.webp",
    "volleyball.webp",
    "black-sun-glasses.webp",
    "classic-sun-glasses.webp",
    "green-and-black-glasses.webp",
    "party-glasses.webp",
    "sunglasses.webp",
    "ipad-mini-2021-starlight.webp",
    "samsung-galaxy-tab-s8-plus-grey.webp",
    "samsung-galaxy-tab-white.webp",
    "blue-frock.webp",
    "girl-summer-dress.webp",
    "gray-dress.webp",
    "short-frock.webp",
    "tartan-dress.webp",
    "300-touring.webp",
    "charger-sxt-rwd.webp",
    "dodge-hornet-gt-plus.webp",
    "durango-sxt-rwd.webp",
    "pacifica-touring.webp",
    "blue-women's-handbag.webp",
    "heshe-women's-leather-bag.webp",
    "prada-women-bag.webp",
    "white-faux-leather-backpack.webp",
    "women-handbag-black.webp",
    "black-women's-gown.webp",
    "corset-leather-with-skirt.webp",
    "corset-with-black-skirt.webp",
    "dress-pea.webp",
    "marni-red-&-black-suit.webp",
    "green-crystal-earring.webp",
    "green-oval-earring.webp",
    "tropical-earring.webp",
    "black-&-brown-slipper.webp",
    "calvin-klein-heel-shoes.webp",
    "golden-shoes-woman.webp",
    "pampi-shoes.webp",
    "red-shoes.webp",
    "iwc-ingenieur-automatic-steel.webp",
    "rolex-cellini-moonphase.webp",
    "rolex-datejust-women.webp",
    "watch-gold-for-women.webp",
    "women's-wrist-watch.webp"
];


const product_images = [
    "essence-mascara-lash-princess.webp",
    "eyeshadow-palette-with-mirror.webp",
    "powder-canister.webp",
    "red-lipstick.webp",
    "red-nail-polish.webp",
    "calvin-klein-ck-one.webp",
    "chanel-coco-noir-eau-de.webp",
    "dior-j'adore.webp",
    "dolce-shine-eau-de.webp",
    "gucci-bloom-eau-de.webp",
    "annibale-colombo-bed.webp",
    "annibale-colombo-sofa.webp",
    "bedside-table-african-cherry.webp",
    "knoll-saarinen-executive-conference-chair.webp",
    "wooden-bathroom-sink-with-mirror.webp",
    "apple.webp",
    "beef-steak.webp",
    "cat-food.webp",
    "chicken-meat.webp",
    "cooking-oil.webp",
    "cucumber.webp",
    "dog-food.webp",
    "eggs.webp",
    "fish-steak.webp",
    "green-bell-pepper.webp",
    "green-chili-pepper.webp",
    "honey-jar.webp",
    "ice-cream.webp",
    "juice.webp",
    "kiwi.webp",
    "lemon.webp",
    "milk.webp",
    "mulberry.webp",
    "nescafe-coffee.webp",
    "potatoes.webp",
    "protein-powder.webp",
    "red-onions.webp",
    "rice.webp",
    "soft-drinks.webp",
    "strawberry.webp",
    "tissue-paper-box.webp",
    "water.webp",
    "decoration-swing.webp",
    "family-tree-photo-frame.webp",
    "house-showpiece-plant.webp",
    "plant-pot.webp",
    "table-lamp.webp",
    "bamboo-spatula.webp",
    "black-aluminium-cup.webp",
    "black-whisk.webp",
    "boxed-blender.webp",
    "carbon-steel-wok.webp",
    "chopping-board.webp",
    "citrus-squeezer-yellow.webp",
    "egg-slicer.webp",
    "electric-stove.webp",
    "fine-mesh-strainer.webp",
    "fork.webp",
    "glass.webp",
    "grater-black.webp",
    "hand-blender.webp",
    "ice-cube-tray.webp",
    "kitchen-sieve.webp",
    "knife.webp",
    "lunch-box.webp",
    "microwave-oven.webp",
    "mug-tree-stand.webp",
    "pan.webp",
    "plate.webp",
    "red-tongs.webp",
    "silver-pot-with-glass-cap.webp",
    "slotted-turner.webp",
    "spice-rack.webp",
    "spoon.webp",
    "tray.webp",
    "wooden-rolling-pin.webp",
    "yellow-peeler.webp",
    "apple-macbook-pro-14-inch-space-grey.webp",
    "asus-zenbook-pro-dual-screen-laptop.webp",
    "huawei-matebook-x-pro.webp",
    "lenovo-yoga-920.webp",
    "new-dell-xps-13-9300-laptop.webp",
    "blue-&-black-check-shirt.webp",
    "gigabyte-aorus-men-tshirt.webp",
    "man-plaid-shirt.webp",
    "man-short-sleeve-shirt.webp",
    "men-check-shirt.webp",
    "nike-air-jordan-1-red-and-black.webp",
    "nike-baseball-cleats.webp",
    "puma-future-rider-trainers.webp",
    "sports-sneakers-off-white-&-red.webp",
    "sports-sneakers-off-white-red.webp",
    "brown-leather-belt-watch.webp",
    "longines-master-collection.webp",
    "rolex-cellini-date-black-dial.webp",
    "rolex-cellini-moonphase.webp",
    "rolex-datejust.webp",
    "rolex-submariner-watch.webp",
    "amazon-echo-plus.webp",
    "apple-airpods.webp",
    "apple-airpods-max-silver.webp",
    "apple-airpower-wireless-charger.webp",
    "apple-homepod-mini-cosmic-grey.webp",
    "apple-iphone-charger.webp",
    "apple-magsafe-battery-pack.webp",
    "apple-watch-series-4-gold.webp",
    "beats-flex-wireless-earphones.webp",
    "iphone-12-silicone-case-with-magsafe-plum.webp",
    "monopod.webp",
    "selfie-lamp-with-iphone.webp",
    "selfie-stick-monopod.webp",
    "tv-studio-camera-pedestal.webp",
    "generic-motorcycle.webp",
    "kawasaki-z800.webp",
    "motogp-ci.h1.webp",
    "scooter-motorcycle.webp",
    "sportbike-motorcycle.webp",
    "attitude-super-leaves-hand-soap.webp",
    "olay-ultra-moisture-shea-butter-body-wash.webp",
    "vaseline-men-body-and-face-lotion.webp",
    "iphone-5s.webp",
    "iphone-6.webp",
    "iphone-13-pro.webp",
    "iphone-x.webp",
    "oppo-a57.webp",
    "oppo-f19-pro-plus.webp",
    "oppo-k1.webp",
    "realme-c35.webp",
    "realme-x.webp",
    "realme-xt.webp",
    "samsung-galaxy-s7.webp",
    "samsung-galaxy-s8.webp",
    "samsung-galaxy-s10.webp",
    "vivo-s1.webp",
    "vivo-v9.webp",
    "vivo-x21.webp",
    "american-football.webp",
    "baseball-ball.webp",
    "baseball-glove.webp",
    "basketball.webp",
    "basketball-rim.webp",
    "cricket-ball.webp",
    "cricket-bat.webp",
    "cricket-helmet.webp",
    "cricket-wicket.webp",
    "feather-shuttlecock.webp",
    "football.webp",
    "golf-ball.webp",
    "iron-golf.webp",
    "metal-baseball-bat.webp",
    "tennis-ball.webp",
    "tennis-racket.webp",
    "volleyball.webp",
    "black-sun-glasses.webp",
    "classic-sun-glasses.webp",
    "green-and-black-glasses.webp",
    "party-glasses.webp",
    "sunglasses.webp",
    "ipad-mini-2021-starlight.webp",
    "samsung-galaxy-tab-s8-plus-grey.webp",
    "samsung-galaxy-tab-white.webp",
    "blue-frock.webp",
    "girl-summer-dress.webp",
    "gray-dress.webp",
    "short-frock.webp",
    "tartan-dress.webp",
    "300-touring.webp",
    "charger-sxt-rwd.webp",
    "dodge-hornet-gt-plus.webp",
    "durango-sxt-rwd.webp",
    "pacifica-touring.webp",
    "blue-women's-handbag.webp",
    "heshe-women's-leather-bag.webp",
    "prada-women-bag.webp",
    "white-faux-leather-backpack.webp",
    "women-handbag-black.webp",
    "black-women's-gown.webp",
    "corset-leather-with-skirt.webp",
    "corset-with-black-skirt.webp",
    "dress-pea.webp",
    "marni-red-&-black-suit.webp",
    "green-crystal-earring.webp",
    "green-oval-earring.webp",
    "tropical-earring.webp",
    "black-&-brown-slipper.webp",
    "calvin-klein-heel-shoes.webp",
    "golden-shoes-woman.webp",
    "pampi-shoes.webp",
    "red-shoes.webp",
    "iwc-ingenieur-automatic-steel.webp",
    "rolex-cellini-moonphase.webp",
    "rolex-datejust-women.webp",
    "watch-gold-for-women.webp",
    "women's-wrist-watch.webp"
]

const product_images2 = [
    null,
    null,
    null,
    null,
    null,
    "calvin-klein-ck-one_2.webp",
    "chanel-coco-noir-eau-de_2.webp",
    "dior-j'adore_2.webp",
    "dolce-shine-eau-de_2.webp",
    "gucci-bloom-eau-de_2.webp",
    "annibale-colombo-bed_2.webp",
    "annibale-colombo-sofa_2.webp",
    "bedside-table-african-cherry_2.webp",
    "knoll-saarinen-executive-conference-chair_2.webp",
    "wooden-bathroom-sink-with-mirror_2.webp",
    null,
    null,
    null,
    "chicken-meat_2.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "ice-cream_2.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "tissue-paper-box_2.webp",
    null,
    "decoration-swing_2.webp",
    null,
    "house-showpiece-plant_2.webp",
    "plant-pot_2.webp",
    null,
    null,
    "black-aluminium-cup_2.webp",
    null,
    "boxed-blender_2.webp",
    null,
    null,
    null,
    null,
    "electric-stove_2.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "microwave-oven_2.webp",
    "mug-tree-stand_2.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "apple-macbook-pro-14-inch-space-grey_2.webp",
    "asus-zenbook-pro-dual-screen-laptop_2.webp",
    "huawei-matebook-x-pro_2.webp",
    "lenovo-yoga-920_2.webp",
    "new-dell-xps-13-9300-laptop_2.webp",
    "blue-&-black-check-shirt_2.webp",
    "gigabyte-aorus-men-tshirt_2.webp",
    "man-plaid-shirt_2.webp",
    "man-short-sleeve-shirt_2.webp",
    "men-check-shirt_2.webp",
    "nike-air-jordan-1-red-and-black_2.webp",
    "nike-baseball-cleats_2.webp",
    "puma-future-rider-trainers_2.webp",
    "sports-sneakers-off-white-&-red_2.webp",
    "sports-sneakers-off-white-red_2.webp",
    "brown-leather-belt-watch_2.webp",
    "longines-master-collection_2.webp",
    "rolex-cellini-date-black-dial_2.webp",
    "rolex-cellini-moonphase_2.webp",
    "rolex-datejust_2.webp",
    "rolex-submariner-watch_2.webp",
    "amazon-echo-plus_2.webp",
    "apple-airpods_2.webp",
    null,
    null,
    null,
    "apple-iphone-charger_2.webp",
    "apple-magsafe-battery-pack_2.webp",
    "apple-watch-series-4-gold_2.webp",
    null,
    "iphone-12-silicone-case-with-magsafe-plum_2.webp",
    "monopod_2.webp",
    null,
    null,
    null,
    "generic-motorcycle_2.webp",
    "kawasaki-z800_2.webp",
    "motogp-ci.h1_2.webp",
    "scooter-motorcycle_2.webp",
    "sportbike-motorcycle_2.webp",
    "attitude-super-leaves-hand-soap_2.webp",
    "olay-ultra-moisture-shea-butter-body-wash_2.webp",
    "vaseline-men-body-and-face-lotion_2.webp",
    "iphone-5s_2.webp",
    "iphone-6_2.webp",
    "iphone-13-pro_2.webp",
    "iphone-x_2.webp",
    "oppo-a57_2.webp",
    "oppo-f19-pro-plus_2.webp",
    "oppo-k1_2.webp",
    "realme-c35_2.webp",
    "realme-x_2.webp",
    "realme-xt_2.webp",
    "samsung-galaxy-s7_2.webp",
    "samsung-galaxy-s8_2.webp",
    "samsung-galaxy-s10_2.webp",
    "vivo-s1_2.webp",
    "vivo-v9_2.webp",
    "vivo-x21_2.webp",
    null,
    null,
    "baseball-glove_2.webp",
    null,
    null,
    null,
    null,
    "cricket-helmet_2.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "black-sun-glasses_2.webp",
    "classic-sun-glasses_2.webp",
    "green-and-black-glasses_2.webp",
    "party-glasses_2.webp",
    "sunglasses_2.webp",
    "ipad-mini-2021-starlight_2.webp",
    "samsung-galaxy-tab-s8-plus-grey_2.webp",
    "samsung-galaxy-tab-white_2.webp",
    "blue-frock_2.webp",
    "girl-summer-dress_2.webp",
    "gray-dress_2.webp",
    "short-frock_2.webp",
    "tartan-dress_2.webp",
    "300-touring_2.webp",
    "charger-sxt-rwd_2.webp",
    "dodge-hornet-gt-plus_2.webp",
    "durango-sxt-rwd_2.webp",
    "pacifica-touring_2.webp",
    "blue-women's-handbag_2.webp",
    "heshe-women's-leather-bag_2.webp",
    "prada-women-bag_2.webp",
    "white-faux-leather-backpack_2.webp",
    "women-handbag-black_2.webp",
    "black-women's-gown_2.webp",
    "corset-leather-with-skirt_2.webp",
    "corset-with-black-skirt_2.webp",
    "dress-pea_2.webp",
    "marni-red-&-black-suit_2.webp",
    "green-crystal-earring_2.webp",
    "green-oval-earring_2.webp",
    "tropical-earring_2.webp",
    "black-&-brown-slipper_2.webp",
    "calvin-klein-heel-shoes_2.webp",
    "golden-shoes-woman_2.webp",
    "pampi-shoes_2.webp",
    "red-shoes_2.webp",
    "iwc-ingenieur-automatic-steel_2.webp",
    "rolex-cellini-moonphase_2.webp",
    "rolex-datejust-women_2.webp",
    "watch-gold-for-women_2.webp",
    "women's-wrist-watch_2.webp"
]

const product_images3 = [
    null,
    null,
    null,
    null,
    null,
    "calvin-klein-ck-one_3.webp",
    "chanel-coco-noir-eau-de_3.webp",
    "dior-j'adore_3.webp",
    "dolce-shine-eau-de_3.webp",
    "gucci-bloom-eau-de_3.webp",
    "annibale-colombo-bed_3.webp",
    "annibale-colombo-sofa_3.webp",
    "bedside-table-african-cherry_3.webp",
    "knoll-saarinen-executive-conference-chair_3.webp",
    "wooden-bathroom-sink-with-mirror_3.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "ice-cream_3.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "decoration-swing_3.webp",
    null,
    "house-showpiece-plant_3.webp",
    "plant-pot_3.webp",
    null,
    null,
    null,
    null,
    "boxed-blender_3.webp",
    null,
    null,
    null,
    null,
    "electric-stove_3.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "microwave-oven_3.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "apple-macbook-pro-14-inch-space-grey_3.webp",
    "asus-zenbook-pro-dual-screen-laptop_3.webp",
    "huawei-matebook-x-pro_3.webp",
    "lenovo-yoga-920_3.webp",
    "new-dell-xps-13-9300-laptop_3.webp",
    "blue-&-black-check-shirt_3.webp",
    "gigabyte-aorus-men-tshirt_3.webp",
    "man-plaid-shirt_3.webp",
    "man-short-sleeve-shirt_3.webp",
    "men-check-shirt_3.webp",
    "nike-air-jordan-1-red-and-black_3.webp",
    "nike-baseball-cleats_3.webp",
    "puma-future-rider-trainers_3.webp",
    "sports-sneakers-off-white-&-red_3.webp",
    "sports-sneakers-off-white-red_3.webp",
    "brown-leather-belt-watch_3.webp",
    "longines-master-collection_3.webp",
    "rolex-cellini-date-black-dial_3.webp",
    "rolex-cellini-moonphase_3.webp",
    "rolex-datejust_3.webp",
    "rolex-submariner-watch_3.webp",
    null,
    "apple-airpods_3.webp",
    null,
    null,
    null,
    null,
    null,
    "apple-watch-series-4-gold_3.webp",
    null,
    "iphone-12-silicone-case-with-magsafe-plum_3.webp",
    null,
    null,
    null,
    null,
    "generic-motorcycle_3.webp",
    "kawasaki-z800_3.webp",
    "motogp-ci.h1_3.webp",
    "scooter-motorcycle_3.webp",
    "sportbike-motorcycle_3.webp",
    "attitude-super-leaves-hand-soap_3.webp",
    "olay-ultra-moisture-shea-butter-body-wash_3.webp",
    "vaseline-men-body-and-face-lotion_3.webp",
    "iphone-5s_3.webp",
    "iphone-6_3.webp",
    "iphone-13-pro_3.webp",
    "iphone-x_3.webp",
    "oppo-a57_3.webp",
    "oppo-f19-pro-plus_3.webp",
    "oppo-k1_3.webp",
    "realme-c35_3.webp",
    "realme-x_3.webp",
    "realme-xt_3.webp",
    "samsung-galaxy-s7_3.webp",
    "samsung-galaxy-s8_3.webp",
    "samsung-galaxy-s10_3.webp",
    "vivo-s1_3.webp",
    "vivo-v9_3.webp",
    "vivo-x21_3.webp",
    null,
    null,
    "baseball-glove_3.webp",
    null,
    null,
    null,
    null,
    "cricket-helmet_3.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "black-sun-glasses_3.webp",
    "classic-sun-glasses_3.webp",
    "green-and-black-glasses_3.webp",
    "party-glasses_3.webp",
    "sunglasses_3.webp",
    "ipad-mini-2021-starlight_3.webp",
    "samsung-galaxy-tab-s8-plus-grey_3.webp",
    "samsung-galaxy-tab-white_3.webp",
    "blue-frock_3.webp",
    "girl-summer-dress_3.webp",
    "gray-dress_3.webp",
    "short-frock_3.webp",
    "tartan-dress_3.webp",
    "300-touring_3.webp",
    "charger-sxt-rwd_3.webp",
    "dodge-hornet-gt-plus_3.webp",
    "durango-sxt-rwd_3.webp",
    "pacifica-touring_3.webp",
    "blue-women's-handbag_3.webp",
    "heshe-women's-leather-bag_3.webp",
    "prada-women-bag_3.webp",
    "white-faux-leather-backpack_3.webp",
    "women-handbag-black_3.webp",
    "black-women's-gown_3.webp",
    "corset-leather-with-skirt_3.webp",
    "corset-with-black-skirt_3.webp",
    "dress-pea_3.webp",
    "marni-red-&-black-suit_3.webp",
    "green-crystal-earring_3.webp",
    "green-oval-earring_3.webp",
    "tropical-earring_3.webp",
    "black-&-brown-slipper_3.webp",
    "calvin-klein-heel-shoes_3.webp",
    "golden-shoes-woman_3.webp",
    "pampi-shoes_3.webp",
    "red-shoes_3.webp",
    "iwc-ingenieur-automatic-steel_3.webp",
    "rolex-cellini-moonphase_3.webp",
    "rolex-datejust-women_3.webp",
    "watch-gold-for-women_3.webp",
    "women's-wrist-watch_3.webp"
]

const product_images4 = [
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "ice-cream_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "plant-pot_4.webp",
    null,
    null,
    null,
    null,
    "boxed-blender_4.webp",
    null,
    null,
    null,
    null,
    "electric-stove_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "microwave-oven_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "blue-&-black-check-shirt_4.webp",
    "gigabyte-aorus-men-tshirt_4.webp",
    "man-plaid-shirt_4.webp",
    "man-short-sleeve-shirt_4.webp",
    "men-check-shirt_4.webp",
    "nike-air-jordan-1-red-and-black_4.webp",
    "nike-baseball-cleats_4.webp",
    "puma-future-rider-trainers_4.webp",
    "sports-sneakers-off-white-&-red_4.webp",
    "sports-sneakers-off-white-red_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "iphone-12-silicone-case-with-magsafe-plum_4.webp",
    null,
    null,
    null,
    null,
    "generic-motorcycle_4.webp",
    "kawasaki-z800_4.webp",
    "motogp-ci.h1_4.webp",
    "scooter-motorcycle_4.webp",
    "sportbike-motorcycle_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "oppo-k1_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "cricket-helmet_4.webp",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "ipad-mini-2021-starlight_4.webp",
    "samsung-galaxy-tab-s8-plus-grey_4.webp",
    "samsung-galaxy-tab-white_4.webp",
    "blue-frock_4.webp",
    "girl-summer-dress_4.webp",
    "gray-dress_4.webp",
    "short-frock_4.webp",
    "tartan-dress_4.webp",
    "300-touring_4.webp",
    "charger-sxt-rwd_4.webp",
    "dodge-hornet-gt-plus_4.webp",
    "durango-sxt-rwd_4.webp",
    "pacifica-touring_4.webp",
    null,
    null,
    null,
    null,
    null,
    "black-women's-gown_4.webp",
    "corset-leather-with-skirt_4.webp",
    "corset-with-black-skirt_4.webp",
    "dress-pea_4.webp",
    "marni-red-&-black-suit_4.webp",
    null,
    null,
    null,
    "black-&-brown-slipper_4.webp",
    "calvin-klein-heel-shoes_4.webp",
    "golden-shoes-woman_4.webp",
    "pampi-shoes_4.webp",
    "red-shoes_4.webp",
    null,
    null,
    null,
    null,
    null
]

/**
 * Downloads a single image from a URL and saves it to a file.
 * @param {string} url The URL of the image to download.
 * @param {string} filepath The local path to save the image.
 * @returns {Promise<string>} A promise that resolves with the saved filename.
 */
async function downloadImage(url, filepath) {
    try {
        // Make an HTTP GET request with responseType as 'stream'
        const response = await axios({
            url,
            method: 'GET',
            responseType: 'stream'
        });

        // Create a writable stream to save the file
        const writer = fs.createWriteStream(filepath);

        // Pipe the response data stream into the file writer stream
        response.data.pipe(writer);

        // Return a promise that resolves when the download and writing are complete
        return new Promise((resolve, reject) => {
            writer.on('finish', () => resolve(filepath));
            writer.on('error', reject);
        });
    } catch (error) {
        console.error(`Error downloading ${url}: ${error.message}`);
        throw error;
    }
}

/**
 * Downloads an array of images with a custom prefix.
 * @param {string[]} urls An array of image URLs.
 * @param {string} prefix The filename prefix.
 * @param {string} directory The directory to save the images.
 */
async function downloadAllImages(urls) {
    // Use Promise.all to download images concurrently for better performance
    const downloadPromises = urls.map(async (url, index) => {
        if (url != null && url != "" && url != undefined) {
            // 1. Split the URL by the forward slash to get an array of segments.
            const segments = url.split('/');

            // 2. Remove the last segment (the filename).
            segments.pop();

            // 3. Get the new last segment.
            const prefix = segments.pop();
            const directory = "products";

            console.log('Starting image download...');

            // Create the download directory if it doesn't exist
            if (!fs.existsSync(directory)) {
                fs.mkdirSync(directory, { recursive: true });
            }

            // Generate a unique filename using the prefix and index
            const filename = `${prefix}_4${path.extname(url).split('?')[0]}`;
            const filepath = path.join(directory, filename);

            try {
                await downloadImage(url, filepath);
                console.log(`Successfully downloaded: ${filename}`);
            } catch (error) {
                console.error(`Failed to download image from ${url}`);
            }
        }
    });

    await Promise.all(downloadPromises);
    console.log('\nAll downloads complete!');
}

// Start the download process
downloadAllImages(product_images4);

